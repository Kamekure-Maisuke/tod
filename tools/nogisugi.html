<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>t-o-d portfolio</title>
</head>
<body>
  <h1>上杉暗号_坂道編</h1>
  <select name="members" id="members">
    <option value="default">メンバーを指定してください</option>
  </select>
  <button id="createNogisugi">生成</button>
  <p id="showResult"></p>
  <a href="./link.html">リンク</a>
  <a href="../">ホーム</a>
  <script>
    const selectMember = document.getElementById('members')
    const btn = document.querySelector("#createNogisugi")
    const result = document.querySelector('#showResult')
    btn.addEventListener("click", outputNogisugi)

    const memberMap = new Map([
      ["秋元真夏","あきもとまなつ"],
      ["齋藤飛鳥","さいとうあすか"],
      ["樋口日奈","ひぐちひな"],
      ["和田まあや","わだまあや"],
      ["北野日奈子","きたのひなこ"],
      ["鈴木絢音","すずきあやね"],
      ["山崎怜奈","やまざきれな"],
      ["伊藤理々杏","いとうりりあ"],
      ["岩本蓮加","いわもとれんか"],
      ["梅澤美波","うめざわみなみ"],
      ["久保史緒里","くぼしおり"],
      ["阪口珠美","さかぐちたまみ"],
      ["佐藤楓","さとうかえで"],
      ["中村麗乃","なかむられの"],
      ["向井葉月","むかいはづき"],
      ["山下美月","やましたみづき"],
      ["吉田綾乃クリスティー","よしだあやのクリスティー"],
      ["与田祐希","よだゆうき"],
      ["遠藤さくら","えんどうさくら"],
      ["賀喜遥香","かきはるか"],
      ["掛橋沙耶香","かけはしさやか"],
      ["金川紗耶","かながわさや"],
      ["黒見明香","くろみはるか"],
      ["佐藤璃果","さとうりか"],
      ["柴田柚菜","しばたゆな"],
      ["清宮レイ","せいみやれい"],
      ["田村真佑","たむらまゆ"],
      ["筒井あやめ","つついあやめ"],
      ["早川聖来","はやかわせいら"],
      ["林瑠奈","はやしるな"],
      ["松尾美佑","まつおみゆ"],
      ["矢久保美緒","やくぼみお"],
      ["弓木奈於","ゆみきなお"],
      ["五百城茉央","いおきまお"],
      ["池田瑛紗","いけだてれさ"],
      ["一ノ瀬美空","いちのせみく"],
      ["井上和","いのうえなぎ"],
      ["岡本姫奈","おかもとひな"],
      ["小川彩","おがわあや"],
      ["奥田いろは","おくだいろは"],
      ["川﨑桜","かわさきさくら"],
      ["菅原咲月","すがわらさつき"],
      ["冨里奈央","とみさとなお"],
      ["中西アルノ","なかにしアルノ"],
      ["山本穂乃香","やまもとほのか"],
      ["吉本彩華","よしもとあやか"],
      ["岩瀬佑美子","いわせゆみこ"],
      ["安藤美雲","あんどうみくも"],
      ["柏幸奈","かしわゆきな"],
      ["宮澤成良","みやざわせいら"],
      ["西川七海","にしかわななみ"],
      ["市來玲奈","いちきれな"],
      ["矢田里沙子","やだりさこ"],
      ["米徳京花","よねとくきょうか"],
      ["伊藤寧々","いとうねね"],
      ["大和里菜","やまとりな"],
      ["畠中清羅","はたなかせいら"],
      ["松井玲奈","まついれな"],
      ["永島聖羅","ながしませいら"],
      ["深川麻衣","ふかがわまい"],
      ["橋本奈々未","はしもとななみ"],
      ["中元日芽香","なかもとひめか"],
      ["伊藤万理華","いとうまりか"],
      ["川村真洋","かわむらまひろ"],
      ["生駒里奈","いこまりな"],
      ["斎藤ちはる","さいとうちはる"],
      ["相楽伊織","さがらいおり"],
      ["若月佑美","わかつきゆみ"],
      ["能條愛未","のうじょうあみ"],
      ["川後陽菜","かわごひな"],
      ["西野七瀬","にしのななせ"],
      ["衛藤美彩","えとうみさ"],
      ["伊藤かりん","いとうかりん"],
      ["斉藤優里","さいとうゆうり"],
      ["桜井玲香","さくらいれいか"],
      ["佐々木琴子","ささきことこ"],
      ["井上小百合","いのうえさゆり"],
      ["中田花奈","なかだかな"],
      ["白石麻衣","しらいしまい"],
      ["堀未央奈","ほりみおな"],
      ["松村沙友理","まつむらさゆり"],
      ["伊藤純奈","いとうじゅんな"],
      ["渡辺みり愛","わたなべみりあ"],
      ["大園桃子","おおぞのももこ"],
      ["高山一実","たかやまかずみ"],
      ["寺田蘭世","てらだらんぜ"],
      ["新内眞衣","しんうちまい"],
      ["星野みなみ","ほしのみなみ"],
    ]);

    const uesugiMap = new Map([
      ["あ", 61],["い", 11],["う", 43],["え", 56],["お", 46],
      ["か", 27],["き", 63],["く", 47],["け", 53],["こ", 55],
      ["さ", 62],["し", 67],["す", 75],["せ", 74],["そ", 34],
      ["た", 32],["ち", 21],["つ", 35],["て", 57],["と", 17],
      ["な", 37],["に", 14],["ぬ", 23],["ね", 36],["の", 45],
      ["は", 13],["ひ", 72],["ふ", 54],["へ", 16],["ほ", 15],
      ["ま", 52],["み", 66],["む", 42],["め", 65],["も", 73],
      ["や", 51],["ゐ", 44],["ゆ", 64],["ゑ", 71],["よ", 31],
      ["ら", 41],["り", 22],["る", 24],["れ", 33],["ろ", 12],
      ["わ", 26],["を", 25],["ん", 76],
    ])

    // メンバーごとに動的にセレクトボックス生成
    memberMap.forEach((v,k) => {
      const op = document.createElement('option');
      op.value = k
      op.textContent = k
      selectMember.appendChild(op)
    })

    // 上杉暗号出力
    function outputNogisugi(){
      let nogisugi = ''
      const kanji = selectMember.value
      if(kanji === 'default'){
        result.textContent = 'メンバーを指定してください。'
        return
      }
      const hiragana = memberMap.get(kanji)
      hiragana.replace(/ー/,'').split('').forEach((v,i,arr) => { // 棒線削除してループ処理(吉田さんのため。)
        // normalizeで濁点消去
        const normalizeText = convertHiragana(
          v.normalize('NFD')[0]
        ).replace(/ぃ/,'い').replace(/ょ/,'よ')
        if(i !== arr.length - 1){
          nogisugi += uesugiMap.get(normalizeText) + ','
        }else {
          nogisugi += uesugiMap.get(normalizeText)
        }
      })
      result.textContent = nogisugi
    }

    // カタカナを平仮名へ変換
    function convertHiragana(katakana) {
      return katakana.replace(/[\u30a1-\u30f6]/g, function(match) {
          const chr = match.charCodeAt(0) - 0x60;
          return String.fromCharCode(chr);
      });
    }
  </script>
</body>
</html>