<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="../tiny_segmenter.js" charset="UTF-8"></script>
  <title>t-o-d portfolio</title>
</head>
<body>
  <h1>パスワードジェネレータ</h1>
  <select name="size" id="size">
    <option value="default">サイズ指定してください</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
  </select>
  <button id="createPassword">生成</button>
  <div>
    <span id="showResult"></span>
    <button id="copyPassword" style="visibility: hidden;">コピー</button>
  </div>
  <a href="./link.html">リンク</a>
  <a href="../">ホーム</a>
  <script>
    const base = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';

    const input = document.querySelector('#size')
    const btn = document.querySelector('#createPassword');
    const result = document.querySelector("#showResult");
    const copy = document.querySelector("#copyPassword")
    btn.addEventListener('click', createPassword)
    copy.addEventListener('click', copyPassword)

    function createPassword(){
      const size = input.value;
      copy.style.visibility = 'hidden';
      if(size === 'default'){
        result.textContent = 'サイズを指定してください。';
        return;
      }
      let password = '';
      for (let i=0;i<Number(size);i++) {
        password += base.charAt(Math.floor(Math.random() * base.length));
      }
      result.textContent = password
      copy.style.visibility = 'visible';
    }

    function copyPassword(){
      const password = result.textContent
      navigator.clipboard.writeText(password)
    }
  </script>
</body>
</html>